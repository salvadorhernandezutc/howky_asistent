function chatSubmit(e){e.preventDefault();const t=cadenaRandom(5,alfabetico),o=txtQuestion.value,s=e.target;s.reset();const a=`<div class="chat_msg d-flex justify-content-end user_submit" data-tokeid="uuid${t}"><div class="msg_user p-2 bg_detail">${o}</div></div>`;contOutput.insertAdjacentHTML("beforeend",a);const n=$(`.user_submit[data-tokeid="uuid${t}"]`);setTimeout(()=>{n.removeClass("active").addClass("show"),setTimeout(scrollToBottom,500),setTimeout(()=>{n.addClass("active")},5e3)},20);const i='<div class="chat_msg chat_open" data-tokeid="loadInfoDelete"><div class="msg_response"><div class="mx-auto pulse-container"><div class="pulse-bubble bg_detail"></div><div class="pulse-bubble bg_detail"></div><div class="pulse-bubble bg_detail"></div></div></div></div>';if(contOutput.insertAdjacentHTML("beforeend",i),setTimeout(function(){$('.chat_msg[data-tokeid="loadInfoDelete"]').addClass("show"),setTimeout(scrollToBottom,500)},200),texto3.test(o))fetch(s.action,{method:"POST",body:JSON.stringify({question:o}),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":s.querySelector("[name=csrfmiddlewaretoken]").value}}).then(e=>e.ok?e.json():e.json().then(e=>{throw new Error(e.message||"Error desconocido")})).then(e=>{if(e.success)displayResponse(e.answer);else{console.error("ğŸ˜¥ Error: ------------------------------"),console.error(e.message),console.log();const t="Lo siento pero en este momento no puedo responderte. <br> La verdad es que hoy me sature de tantas solicitudes y no puedo procesar mÃ¡s. ğŸ˜¥ğŸ¤’ <br> Estare de nuevo en funcionamineto muy pronto. ğŸ˜ŠğŸ˜‰ğŸ˜Œ";displayText(t)}}).catch(e=>{console.error("ğŸ˜¥ Error:",e),alertSToast("top",8e3,"warning","OcurriÃ³ un error. Intente nuevamente. ğŸ˜¥")});else{const e="No comprendo a lo que te refieres, por dame mas detalles de lo que deseas saber <br> Mientras mas detalles mejor ğŸ˜ŠğŸ˜‰.";displayText(e)}}function displayResponse(e){const t=cadenaRandom(5,alfabetico),o=e.imagenes,s=e.redirigir;let a="",n="";if(null!=o&&(a=`<div class="chat_msg show"><img src="${o}" alt="${e.titulo}" class="chat_img" /></div>`),s&&""!==s.trim()){const e=s.includes("="),t=e?'button type="button" data-toggle-class="body-open_map" data-route':"a href",o=e?"Abrir ruta en el Mapa":"Ver mÃ¡s";n=`\n            <div class="chat_msg show msg_link">\n                <${t}="${s}" class="btn btn_detail_inset">\n                    ${o} <i class="fas fa-up-right-from-square ms-1"></i>\n                </${e?"button":"a"}>\n            </div>\n        `}const i=e.informacion.replace(/\n/g,"<br>"),d=`<div class="chat_msg chat_open" data-tokeid="uuid${t}"><div class="msg_response">${i}</div></div>${a} ${n}`;contOutput.insertAdjacentHTML("beforeend",d);const c=document.querySelector(`.chat_msg[data-tokeid="uuid${t}"]`);$('.chat_msg[data-tokeid="loadInfoDelete"]').remove(),setTimeout(function(){c.classList.add("show"),setTimeout(scrollToBottom,350)},20)}function displayText(e){$('.chat_msg[data-tokeid="loadInfoDelete"]').remove();const t=cadenaRandom(5,alfabetico),o=e.replace(/\n/g,"<br>"),s=`<div class="chat_msg chat_open" data-tokeid="uuid${t}"><div class="msg_response">${o}</div></div>`;contOutput.insertAdjacentHTML("beforeend",s);const a=document.querySelector(`.chat_msg[data-tokeid="uuid${t}"]`);setTimeout(function(){a.classList.add("show"),setTimeout(scrollToBottom,350)},20)}function scrollToBottom(){contOutput.scrollTop=contOutput.scrollHeight}var alfabetico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz12345678901234567890",texto3=/[a-zA-Z0-9]{3}/;const isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);$(document).ready(function(){try{const o=$("#asistent_model");let s=!1;function e(){s=!s,s?o[0].pause():o[0].play()}function t(){$("body").hasClass("open_map")?($("#chatOpenMap i.fa-solid").addClass("fa-comment-dots").removeClass("fa-map-location-dot"),o.attr("camera-orbit","-15deg 70deg 5m")):($("#chatOpenMap i.fa-solid").addClass("fa-map-location-dot").removeClass("fa-comment-dots"),o.attr("camera-orbit","15deg 70deg 5m")),$("#model").hasClass("open")&&e()}$("#openChat").on("click",function(){$("#model").toggleClass("open"),e()}),$("#chatOpenMap").on("click",()=>{setTimeout(()=>{t()},500)}),$(document).on("click","[data-route]",function(){setTimeout(()=>{t()},500);const e=$(this).attr("data-route").split("~"),o=new URLSearchParams(window.location.search);o.set("origin",e[0]),o.set("destiny",e[1]),history.replaceState({},"",`${location.pathname}?${o}`)}),$("#txtQuestion").keydown(e=>{13!==e.keyCode||e.shiftKey||(e.preventDefault(),$("#chatForm_submit").click())}),$("#chatForm").submit(chatSubmit)}catch(e){console.error("Error Inesperado: ",e),alertSToast("center",8e3,"error","ğŸ˜¥ Ha ocurrido un error inesperado. cÃ³digo: #304")}});const contOutput=document.querySelector("#output");let audioEnabled=!0,saludoMostrado=!0;if(contOutput&&saludoMostrado){const e='<div class="chat_msg chat_open" data-tokeid="initialMessage"><div class="msg_response">Â¡Hola! Soy Hawky ğŸ‘‹ğŸ˜, tu asistente virtual de la Universidad TecnolÃ³gica de Coahuila. Puedes preguntarme sobre trÃ¡mites, carreras, costos u otros temas de la universidad. Â¿En quÃ© puedo ayudarte?ğŸ˜‰ğŸ˜ŠğŸ˜</div></div>';contOutput.insertAdjacentHTML("beforeend",e);const t=document.querySelector('.chat_msg[data-tokeid="initialMessage"]');setTimeout(function(){t.classList.add("show")},500)}if(contOutput){const e=new MutationObserver(()=>{scrollToBottom()});scrollToBottom(),e.observe(contOutput,{childList:!0,subtree:!0})}