let tinyTheme="oxide",tinyThemeCss="default";$("#switchTheme").on("click",function(){$("#switchTheme").is(":checked")?(tinyTheme="oxide",tinyThemeCss="default"):(tinyTheme="dark",tinyThemeCss="dark")});const colorTheme=localStorage.getItem("data-mdb-theme");colorTheme&&("light"==colorTheme?(tinyTheme="oxide",tinyThemeCss="default"):(tinyTheme="dark",tinyThemeCss="dark"));var urlSendImgs=$("[data-upload-imgs]").data("upload-imgs"),relativeUrlSend=`../../..${urlSendImgs}`,urlListImgs=$("[data-list-imgs]").data("list-imgs"),relativeUrlImgs=`../../..${urlListImgs}`;const uploadImageTiny=async(e,t)=>{try{const t=new FormData;t.append("file",e.blob(),e.filename()),t.append("csrfmiddlewaretoken",getCSRFToken());const a=await fetch(relativeUrlSend,{method:"POST",body:t,credentials:"include"});if(!a.ok)throw new Error(`Error HTTP: ${a.status}`);const i=await a.json();if(!i||"string"!=typeof i.location)throw new Error("Al parecer esta peticion no esta Permitida");return i.location}catch(e){return console.error(e),null}};tinymce.init({selector:".bannerTitle",language:"es_MX",branding:!1,statusbar:!1,resize:!1,plugins:"quickbars",mobile:{toolbar_mode:"sliding",height:110},menubar:!1,toolbar_mode:"wrap",toolbar:"undo redo | bold removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold removeformat",height:110,promotion:!1,skin:tinyTheme,content_css:tinyThemeCss,content_style:"strong { color: #3b71ca; }",forced_root_block:"",setup:function(e){e.on("NodeChange",function(t){e.dom.select("b, strong").forEach(function(t){e.dom.addClass(t,"text_detail")})})}}),tinymce.init({selector:"#textTiny",language:"es_MX",branding:!1,statusbar:!1,resize:!1,plugins:"advlist autolink lists link charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table wordcount quickbars autoresize",mobile:{toolbar_mode:"sliding",autoresize_min_height:400,min_height:400},menubar:!1,contextmenu:"paste cut removeformat | link table | hr",contextmenu_never_use_native:!0,toolbar_mode:"wrap",toolbar:"undo redo | removeformat | styles | bold italic underline | alignleft aligncenter outdent indent | bullist numlist | table tabledelete | wordcount",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold italic underline | blocks | forecolor backcolor | quicklink blockquote hr",autoresize_min_height:450,min_height:450,promotion:!1,skin:tinyTheme,content_css:tinyThemeCss}),tinymce.init({selector:"#mainTiny",language:"es_MX",branding:!1,statusbar:!1,resize:!1,plugins:"advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table wordcount quickbars image pagebreak autoresize autosave",mobile:{menubar:!0,toolbar_mode:"sliding",toolbar_sticky:!0},menubar:"file edit view format table",menu:{file:{title:"File",items:"restoredraft | preview | print"},view:{title:"View",items:"visualaid visualchars visualblocks | spellchecker | preview fullscreen"}},contextmenu:"paste cut removeformat | link image table | hr pagebreak",contextmenu_never_use_native:!0,toolbar_mode:"wrap",toolbar_sticky:!0,toolbar:"undo redo restoredraft | forecolor backcolor | fontfamily styles | bold italic underline removeformat | alignleft aligncenter alignright | alignjustify outdent indent | bullist numlist | table tabledelete | image gallerycustom | insertdatetime link unlink openlink | cut paste wordcount",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold italic underline | blocks forecolor backcolor | quicklink blockquote",quickbars_image_toolbar:"image|alignleft aligncenter alignright | rotateleft rotateright | imageoptions",color_map:["#ECCAFA","Light Purple","#C2E0F4","Light Blue","#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#B96AD9","Purple","#3598DB","Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#843FA1","Dark Purple","#3B71CA","Dark Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"],skin:tinyTheme,content_css:tinyThemeCss,image_title:!0,automatic_uploads:!0,images_upload_url:relativeUrlSend,images_upload_handler:uploadImageTiny,min_height:625,autoresize_min_height:625,autosave_interval:"20m",promotion:!1,insertdatetime_formats:["%d-%m-%Y","%Y-%m-%d","%H:%M:%S","%I:%M:%S %p"],content_style:"\n        img.img-tiny {\n            max-width: 100%;\n            height: auto;\n            border: none;\n            border-radius: 10px;\n            margin: 2px;\n        }\n    ",paste_data_images:!0,setup:e=>{e.ui.registry.addButton("gallerycustom",{icon:"gallery",onAction:function(){$("#selectImageModal").modal("show"),$.ajax({url:relativeUrlImgs,method:"GET",success:function(e){const t=e.imagenes,a=$("#selectImageModal .modal-body .row");a.empty(),t.forEach(e=>{const t=`\n                                <div class="mb-4 col-6 col-md-4 col-lg-3">\n                                    <div class="card">\n                                        <img src="${e.url}" alt="Imagen del blog" class="card-img ">\n                                        <div class="card-img-overlay p-2">\n                                            <button class="btn btn_detail btn_opacity-hover" onclick="insertImage('${e.url}')">Insertar</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            `;a.append(t)})},error:function(e){console.error("Error al cargar las im√°genes:",e),alertSToast("center",8e4,"warning","Ocurrio un erro al obtener las imagenes.")}})}}),window.selectImage=function(t){e.insertContent(`<img src="/media/${t}" class="img-tiny"/>`),$("#selectImageModal").modal("hide")},e.on("paste",t=>{const a=(t.clipboardData||window.clipboardData).items;for(const i of a)if("file"===i.kind&&i.type.startsWith("image/")){t.preventDefault();const a=i.getAsFile(),o=new FileReader;o.readAsDataURL(a),o.onload=()=>{const t=e.editorUpload.blobCache.create(a.name,a,o.result);e.editorUpload.blobCache.add(t),uploadImageTiny(t).then(t=>{t&&e.insertContent(`<img src="${t}" class="img-tiny"/><p>&nbsp;</p>`)})}}}),e.on("NodeChange",e=>{const t=e.element.getElementsByTagName("img");for(const e of t)e.classList.add("img-tiny")})}});