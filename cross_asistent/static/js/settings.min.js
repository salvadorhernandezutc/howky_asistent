function getCSRFToken(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var a=jQuery.trim(t[e]);if("csrftoken="==a.substring(0,10))return decodeURIComponent(a.substring(10))}const n=$("[name=csrfmiddlewaretoken]").val();return n}function cadenaRandom(t,e){for(var a="",n=0;n<t;n++){var o=Math.floor(Math.random()*e.length);a+=e.charAt(o)}return a}function jsonSubmit(t){t.preventDefault=t.preventDefault||function(){},t.preventDefault();const e=t.target,a=new FormData(e);if(a.has("contenidoWord")){const t=tinymce.activeEditor.getContent();a.set("htmlTiny",t);const e=tinymce.activeEditor.getContent({format:"text"});a.set("textTiny",e)}try{formSubmitBtn=e.querySelector('button[type="submit"]'),formSubmitBtn&&formSubmitBtn.setAttribute("disabled","disabled")}catch(t){console.warn("Advertencia: Boton de envio no encontrado..."),console.warn(formSubmitBtn),console.error(t)}fetch(e.action,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":formToken}}).then(async t=>{if(!t.ok){const e=await t.json();throw console.error(e),new Error(e.error||"Error en el formato recivido")}return t.json()}).then(t=>{if(dataMessage=t.message,1==t.success){let n,o=t.icon||"success",r=t.position||"center";function a(){window.location.href=t.redirect_url}switch(t.functions){case"singin":return a();case"reload":n=(()=>location.reload());break;case"redirect":n=a;break;case"reset":n=(()=>e.reset())}setTimeout(()=>e.querySelector('button[type="submit"]').removeAttribute("disabled"),1e4);const s=document.querySelectorAll('input[type="password"]');s.forEach(t=>t.value=""),alertSToast(r,timerOut,o,dataMessage,n)}else 0==t.success&&(t.valSelector&&(e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.add("is-invalid"),e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.remove("is-valid")),alertSToast("top",timerOut+6e3,"warning",dataMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")}));"submit"==t.functions&&e.querySelector('button[type="submit"]').removeAttribute("disabled")}).catch(t=>{console.error("😥 Error inesperado:",t),errorMessage=t.message||"Ocurrió un error. Intente nuevamente. 😥",alertSToast("center",timerOut+8e3,"error",errorMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")})})}function convertToDateInputFormat(t){const e=new Date(t),a=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${a}-${n}-${o}`}function alertSToast(t,e,a,n,o){const r=Swal.mixin({toast:!0,position:t,showConfirmButton:!1,showCloseButton:!0,timer:e,timerProgressBar:!0,customClass:{icon:"icon_alert",title:"title_alert",timerProgressBar:"progressbar_alert",closeButton:"close_button_alert"},didOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)},didDestroy:o});r.fire({icon:a,title:n})}var alfabetico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alfanumerico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789",caracteres="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789@$!%*.?&",texto3=/[a-zA-Z0-9]{3}/,formToken=getCSRFToken(),timerOut=5e3,expressions={name:/^[a-zA-ZÀ-ÿ\s]+$/,username:/^(?![0-9_-])[a-zA-Z0-9_-]+$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*.?&])[A-Za-z\d@#<>:;$!%*.?&]{8,}$/,title:/^[a-zA-ZÀ-ÿ][a-zA-ZÀ-ÿ0-9\s\-_#]*$/};$(document).ready(function(){try{$("#overlayMenu").click(()=>{$("nav button.navbar-toggler").click()});var t=$("#searchInput");function e(){var e=t.val().toLowerCase();$("#searchInput").text(e);$(".results_item").filter(function(){return $(this).toggle($(this).text().toLowerCase().indexOf(e)>-1),$(this).is(":visible")}).length}function a(){var t=$(this).data("reset_form"),e=$("#"+t)[0];e&&e.reset()}function n(){const t=["#4285F4","#EA4335","#FBBC05","#4285F4","#34A853","#EA4335"],e=$(".style_google"),a=e.text();e.empty();for(let n=0;n<a.length;n++)e.append(`<span style="color:${t[n]}">${a[n]}</span>`)}t.on("input",e),$("[data-submit-form]").submit(jsonSubmit),$("[data-submit-form]").is("[data-submit-ready]")&&setTimeout(()=>{$('[data-submit-ready] button[type="submit"]').click()},2e3),$("[data-submit-blur] .input_blur").on("blur",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");t.find(`button#${e}`).click()}),$("[data-submit-blur] .input_change").on("change",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");setTimeout(()=>{t.find(`button#${e}`).click()},1e3)}),$("[data-submit-click]").on("click",function(){const t=$(this).data("submit-click");$("#"+t).click().attr("disabled","disabled"),disabledButtons.includes(t)||disabledButtons.push(t),localStorage.setItem("disabledButtons",JSON.stringify(disabledButtons))}),$("button[data-editinput]").click(function(){$(this).addClass("active");var t=cadenaRandom(10,caracteres),e=$(this).data("editinput");setTimeout(()=>{$(this).removeClass("active")},1e3),$("#"+e).val(`UTC#${t}`).addClass("active")}),$("[data-btn_closed]").on("click",function(){const t=$(this).data("btn_closed");$(t).toggleClass("show"),t.includes("slide")&&$(t).slideToggle("slow")}),$(document).on("click","[data-toggle-class]",function(){const t=$(this).attr("data-toggle-class").split("-"),e=t[0],a=t[1];"slide"==a?$(e).slideToggle("slow"):$(e).toggleClass(a)}),$("[data-remove-item]").on("click",function(){var t=$(this).data("remove-item");setTimeout(()=>{$("#"+t).slideUp("fast"),setTimeout(()=>{$("#"+t).remove()},500)},1e3)}),$("[data-transfer-click]").on("click",function(){const t=$(this).data("transfer-click"),e=$("#"+t);e.click()}),$("[data-reset_form]").on("click",a),n(),$(document).on("keydown",function(t){"Escape"!==t.key&&27!==t.keyCode||Swal.close()});const u=$("input[data-init-clear], textarea[data-init-clear]");u.each(function(){$(this).on("input",function(){let t=$(this).attr("id"),e=$(`[data-clear="${t}"]`);""==$(this).val()?e.hide():e.show()})});const m=$("[data-clear]");m.on("click",function(){const t=$(this).attr("data-clear");$(`#${t}`).val(""),$(this).slideUp("fast")}),$("[data-change-color]").on("click",function(){$("[data-change-color]").each(function(t,e){$(e).removeClass("active")});var t=$(this).addClass("active").data("change-color"),e=$(this).data("rgb");$("html").attr("data-color_prefer",t),localStorage.setItem("data-color_prefer",t),localStorage.setItem("data-color_rgb",e)});const f=localStorage.getItem("data-color_prefer");f?($(`[data-change-color="${f}"]`).addClass("active"),$("html").attr("data-color_prefer",f)):($('[data-change-color="blue"]').addClass("active"),$("html").attr("data-color_prefer","blue"));const g=$("#switchTheme"),p=$("#switchText"),h=$("html"),b=t=>{const e={light:{text:"Claro",dataAttr:"light",lastLayer:"light-v11"},dark:{text:"Oscuro",dataAttr:"dark",lastLayer:"dark-v11"}},a=e[t];p.text(a.text),h.attr("data-mdb-theme",a.dataAttr),localStorage.setItem("data-mdb-theme",a.dataAttr),localStorage.setItem("mapbox-last_layer",a.lastLayer),g.prop("checked","light"===t)};g.on("click",function(){b(g.is(":checked")?"light":"dark")});const v=localStorage.getItem("data-mdb-theme");function o(t,e){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$(`#${e}`).attr("src",t.target.result)},a.readAsDataURL(t.files[0])}}v&&b(v),$("[data-img_dom]").change(function(){idImgDom=$(this).data("img_dom"),o(this,idImgDom)}),$("[data-input_transparent]").on({focus:function(){$(this).toggleClass("input_transparent")},blur:function(){$(this).toggleClass("input_transparent")}});var r=!1;function s(){r?$("#updatePassBlock").slideUp("fast"):$("#profileSaved").slideUp("fast",function(){$("#updatePassBlock").slideUp("fast")})}function i(){const t={},e=window.location.search.substring(1),a=e.split("&");for(let e=0;e<a.length;e++){const n=a[e].split("=");if(2===n.length){const e=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]);t[e]=a}}return t}function c(){const t=i();if(console.log(t),t.hasOwnProperty("tab")){const e=t.tab,a=$(`#${e}`);a.length&&a.click()}}function l(t){function e(){const t=s.val().trim();if(!t)return[];const e=t.replace(/[;:.]+/g,",").replace(/[\t\n]/g," ").replace(/^,|,$/g,"").replace(/,+/g,",");return e.split(",").map(t=>t.trim()).filter(t=>""!==t)}function a(){i.empty();const t=e();t.forEach(t=>{const e=t.replace(/[^a-zA-Z0-9_-]/g,"_"),a=$(`\n                        <span id="tag-${e}" class="badge badge-primary d-flex justify-content-between align-items-center col">\n                            ${t}\n                            <button type="button" class="btn-close btn-close-white btn-sm" aria-label="Close" data-tag="${t}"></button>\n                        </span>\n                    `);i.append(a)})}function n(t){if(t=t.trim(),!t||e().includes(t))return r.addClass("is-invalid"),void setTimeout(()=>{r.removeClass("is-invalid")},2e3);const n=e();n.push(t),s.val(n.join(",")),a(),r.val("")}function o(t){let n=e().filter(e=>e!==t);s.val(n.join(",")),a()}const r=t.find(".addTags"),s=t.find(".tags"),i=t.find(".allTags");r.on("keydown",function(t){if(["Enter",",",".",";",":"].includes(t.key)){t.preventDefault();const e=r.val().trim();e.split(/[\t\n,;:.]+/).forEach(t=>{t&&n(t)})}}),i.on("click",".btn-close",function(){const t=$(this).data("tag");o(t)}),s.on("click",()=>a()),s.on("input",function(){a()}),a()}function d(){let t=$(this).val();t=t.replace(/T\d.*$/,""),t=t.trim().replace(/[\s;:.\u00A0]+/g,",").replace(/,+/g,",").replace(/^,|,$/g,"");const e=$(this).attr("data-blur-tags"),a=$(`${e} .tags`);let n=a.val().trim();n&&(n=n.replace(/,+$/g,""),t=n+","+t),t=t.replace(/,+/g,",").replace(/^,|,$/g,""),a.val(t).trigger("input")}$("#updatePassBtn").on("click",function(){let t=$(this);$("#updatePassText").toggle(),$("#updatePassBtn").hasClass("bg_blue-green")?$("#profileSaved").slideDown("fast",function(){$("#updatePassBlock").slideDown("fast",function(){$("html, body").scrollTop($(document).height())})}):s(),"Cambiar Contraseña"==t.text()?(t.toggleClass("bg_blue-green bg_blue-red"),t.text("No Cambiar Contraseña"),r||$("#passwordSend").val(""),$("#newPass").val(""),$("#confNewPass").val("")):(t.toggleClass("bg_blue-green bg_blue-red"),t.text("Cambiar Contraseña"))}),$("[data-input_change]").each(function(){const t=$(this),e=t.attr("name");var a=t.val();t.on("input",function(){t.val()==a?(t.attr("name",`${e}`),s(),r=!1):(t.attr("name",`${e}Changed`),$("#profileSaved").slideDown("fast"),r=!0,""==t.val()&&t.attr("name",`${e}`))}),t.on("blur",function(){""==t.val()&&(t.attr("name",`${e}`),s(),r=!1)}),t.on("click",function(){e})}),$("input#deletePicture").change(function(){$(this).is(":checked")?($('[for="deletePicture"]').addClass("btn_press"),$("#profileSaved").slideDown("fast"),r=!0):($('[for="deletePicture"]').removeClass("btn_press"),s(),r=!1)}),$("[data-select_addClass]").change(function(){const t=$(this).val();$(this).attr("class",`form-select change_bg ${t}`)}),$("[data-blur-default]").on("blur",function(){const t=$(this).attr("data-blur-default"),e=$(this).val(),a=$(this).attr(t);""==e&&$(this).val(a),"min"==t&&e<a&&$(this).val(a)}),$('input[type="range"]').on("input",function(){const t=$(this).attr("id"),e=$(this).val();$(`[data-range-val="#${t}"]`).text(e)}),$("[data-valparams]").length&&c(),$("[data-blur-min]").on("blur",function(){const t=$(this).val(),e=$(this).attr("data-blur-min");$(e).attr("min",t)}),$(".tag-group").each(function(){l($(this))}),$("[data-blur-tags]").on("blur",function(){d.call(this)}),$("[data-switch]").on("click",function(){const t=$(this).data("switch"),e=$(this).prop("checked");localStorage.setItem(t,e);const a=$("#"+t+"Text"),n=$(this).data("switch-vals").split(",");a.text(e?n[1]:n[0])})}catch(t){console.error("Error Inesperado: ",t),alertSToast("center",8e3,"error","😥 Ah ocurrido un error inesperado. codigo: #304")}});const inputs=document.querySelectorAll("input[data-copy]");inputs.forEach(t=>{const e=()=>{if(!navigator.clipboard)return void alertSToast("center",8e3,"info","Tu navegador no admite copiar al portapapeles 😯😥🤔");const e=t.value;""!=e&&navigator.clipboard.writeText(e).then(()=>{alertSToast("top",5e3,"success","Texto Copiado! 🥳")}).catch(t=>{const e="Error al copiar al portapapeles";console.error(e,":",t),alertSToast("top",8e3,"error",`${e} 🤔😥`)})};t.addEventListener("click",e)});const dropArea=document.getElementById("drop-area");if(dropArea){const t=document.getElementById("file-input"),e=document.getElementById("image-list");function formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=1024,n=e<0?0:e,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,r)).toFixed(n))+o[r]}function preventDefaults(t){t.preventDefault(),t.stopPropagation()}function handleDrop(t){let e=t.dataTransfer,a=e.files;handleFiles({target:{files:a}})}function handleFiles(t){let e=t.target.files,a=[],n=1;[...e].forEach(t=>{validateImage(t)&&(a.push(t),previewImage(t,n),++n,console.log(++n))}),a.length>0?alertSToast("top-end",6e3,"success",`${a.length} imágenes cargadas <br>correctamente 😋🤘🥳`):alertSToast("center",6e3,"error","No se admite este tipo de archivo ⚠️😯😥")}function validateImage(t){const e=["image/jpeg","image/png","image/jpg"];return e.includes(t.type)}function previewImage(t,a){const n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){const o=t.name;let r=o.lastIndexOf(".");r=o.substring(r+1);const s=cadenaRandom(5,alfanumerico),i=`<div id="img_${s}" class="image-item"><img src="${n.result}" class="img-rounded unfocus-5"><div class="fs-8"><p class="name-file m-0">${o}</p><p class="size-file m-0">(${r}) ${formatBytes(t.size)}</p></div></div>`;e.insertAdjacentHTML("beforeend",i),setTimeout(()=>{document.querySelector(`#img_${s}`).classList.add("visible"),setTimeout(()=>{document.querySelector(`#img_${s} img`).classList.remove("unfocus-5")},110*a)},90*a)}}["dragenter","dragover","dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,preventDefaults,!1)}),["dragenter","dragover"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.add("hover"),!1)}),["dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.remove("hover"),!1)}),dropArea.addEventListener("drop",handleDrop,!1),dropArea.addEventListener("click",()=>t.click(),!1),t.addEventListener("change",handleFiles,!1)}