var alfabetico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alfanumerico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789",caracteres="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789@$!%*.?&",texto3=/[a-zA-Z0-9]{3}/,formToken=getCSRFToken(),timerOut=5e3,expressions={name:/^[a-zA-Z-每\s]+$/,username:/^(?![0-9_-])[a-zA-Z0-9_-]+$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*.?&])[A-Za-z\d@#<>:;$!%*.?&]{8,}$/,title:/^[a-zA-Z-每][a-zA-Z-每0-9\s\-_#]*$/};function getCSRFToken(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var a=jQuery.trim(t[e]);if("csrftoken="==a.substring(0,10))return decodeURIComponent(a.substring(10))}return $("[name=csrfmiddlewaretoken]").val()}function cadenaRandom(t,e){for(var a="",o=0;o<t;o++){var n=Math.floor(Math.random()*e.length);a+=e.charAt(n)}return a}$(document).ready(function(){try{$("#overlayMenu").click(()=>{$("nav button.navbar-toggler").click()});var t=$("#searchInput");t.on("input",function(){var e=t.val().toLowerCase();$("#searchInput").text(e),$(".results_item").filter(function(){return $(this).toggle($(this).text().toLowerCase().indexOf(e)>-1),$(this).is(":visible")}).length}),$("[data-submit-form]").submit(jsonSubmit),$("[data-submit-form]").is("[data-submit-ready]")&&setTimeout(()=>{$('[data-submit-ready] button[type="submit"]').click()},2e3),$("[data-submit-blur] .input_blur").on("blur",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");t.find(`button#${e}`).click()}),$("[data-submit-blur] .input_change").on("change",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");setTimeout(()=>{t.find(`button#${e}`).click()},1e3)}),$("[data-submit-click]").on("click",function(){const t=$(this).data("submit-click");$("#"+t).click().attr("disabled","disabled"),disabledButtons.includes(t)||disabledButtons.push(t),localStorage.setItem("disabledButtons",JSON.stringify(disabledButtons))}),$("button[data-editinput]").click(function(){$(this).addClass("active");var t=cadenaRandom(10,caracteres),e=$(this).data("editinput");setTimeout(()=>{$(this).removeClass("active")},1e3),$("#"+e).val(`UTC#${t}`).addClass("active")}),$("[data-btn_closed]").on("click",function(){const t=$(this).data("btn_closed");$(t).toggleClass("show"),t.includes("slide")&&$(t).slideToggle("slow")}),$(document).on("click","[data-toggle-class]",function(){const t=$(this).attr("data-toggle-class").split("-"),e=t[0],a=t[1];"slide"==a?$(e).slideToggle("slow"):$(e).toggleClass(a)}),$("[data-remove-item]").on("click",function(){var t=$(this).data("remove-item");setTimeout(()=>{$("#"+t).slideUp("fast"),setTimeout(()=>{$("#"+t).remove()},500)},1e3)}),$("[data-transfer-click]").on("click",function(){const t=$(this).data("transfer-click");$("#"+t).click()}),$("[data-reset_form]").on("click",function(){var t=$(this).data("reset_form"),e=$("#"+t)[0];e&&e.reset()}),function(){const t=["#4285F4","#EA4335","#FBBC05","#4285F4","#34A853","#EA4335"],e=$(".style_google"),a=e.text();e.empty();for(let o=0;o<a.length;o++)e.append(`<span style="color:${t[o]}">${a[o]}</span>`)}(),$(document).on("keydown",function(t){"Escape"!==t.key&&27!==t.keyCode||Swal.close()});$("input[data-init-clear], textarea[data-init-clear]").each(function(){$(this).on("input",function(){let t=$(this).attr("id"),e=$(`[data-clear="${t}"]`);""==$(this).val()?e.hide():e.show()})});$("[data-clear]").on("click",function(){const t=$(this).attr("data-clear");$(`#${t}`).val(""),$(this).slideUp("fast")}),$("[data-change-color]").on("click",function(){$("[data-change-color]").each(function(t,e){$(e).removeClass("active")});var t=$(this).addClass("active").data("change-color"),e=$(this).data("rgb");$("html").attr("data-color_prefer",t),localStorage.setItem("data-color_prefer",t),localStorage.setItem("data-color_rgb",e)});const r=localStorage.getItem("data-color_prefer");r?($(`[data-change-color="${r}"]`).addClass("active"),$("html").attr("data-color_prefer",r)):($('[data-change-color="blue"]').addClass("active"),$("html").attr("data-color_prefer","blue"));const s=$("#switchTheme"),i=$("#switchText"),l=$("html"),c=t=>{const e={light:{text:"Claro",dataAttr:"light",lastLayer:"light-v11"},dark:{text:"Oscuro",dataAttr:"dark",lastLayer:"dark-v11"}}[t];i.text(e.text),l.attr("data-mdb-theme",e.dataAttr),localStorage.setItem("data-mdb-theme",e.dataAttr),localStorage.setItem("mapbox-last_layer",e.lastLayer),s.prop("checked","light"===t)};s.on("click",function(){c(s.is(":checked")?"light":"dark")});const d=localStorage.getItem("data-mdb-theme");d&&c(d),$("[data-img_dom]").change(function(){idImgDom=$(this).data("img_dom"),function(t,e){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$(`#${e}`).attr("src",t.target.result)},a.readAsDataURL(t.files[0])}}(this,idImgDom)}),$("[data-input_transparent]").on({focus:function(){$(this).toggleClass("input_transparent")},blur:function(){$(this).toggleClass("input_transparent")}});var e=!1;function a(){e?$("#updatePassBlock").slideUp("fast"):$("#profileSaved").slideUp("fast",function(){$("#updatePassBlock").slideUp("fast")})}function o(t){const e=t.find(".addTags"),a=t.find(".tags"),o=t.find(".allTags");function n(){const t=a.val().trim();if(!t)return[];return t.replace(/[;:.]+/g,",").replace(/[\t\n]/g," ").replace(/^,|,$/g,"").replace(/,+/g,",").split(",").map(t=>t.trim()).filter(t=>""!==t)}function r(){o.empty();n().forEach(t=>{const e=t.replace(/[^a-zA-Z0-9_-]/g,"_"),a=$(`\n                        <span id="tag-${e}" class="badge badge-primary d-flex justify-content-between align-items-center col">\n                            ${t}\n                            <button type="button" class="btn-close btn-close-white btn-sm" aria-label="Close" data-tag="${t}"></button>\n                        </span>\n                    `);o.append(a)})}e.on("keydown",function(t){if(["Enter",",",".",";",":"].includes(t.key)){t.preventDefault();e.val().trim().split(/[\t\n,;:.]+/).forEach(t=>{t&&function(t){if(!(t=t.trim())||n().includes(t))return e.addClass("is-invalid"),void setTimeout(()=>{e.removeClass("is-invalid")},2e3);const o=n();o.push(t),a.val(o.join(",")),r(),e.val("")}(t)})}}),o.on("click",".btn-close",function(){!function(t){let e=n().filter(e=>e!==t);a.val(e.join(",")),r()}($(this).data("tag"))}),a.on("click",()=>r()),a.on("input",function(){r()}),r()}function n(){let t=$(this).val();t=t.replace(/T\d.*$/,""),t=t.trim().replace(/[\s;:.\u00A0]+/g,",").replace(/,+/g,",").replace(/^,|,$/g,"");const e=$(this).attr("data-blur-tags"),a=$(`${e} .tags`);let o=a.val().trim();o&&(o=o.replace(/,+$/g,""),t=o+","+t),t=t.replace(/,+/g,",").replace(/^,|,$/g,""),a.val(t).trigger("input")}$("#updatePassBtn").on("click",function(){let t=$(this);$("#updatePassText").toggle(),$("#updatePassBtn").hasClass("bg_blue-green")?$("#profileSaved").slideDown("fast",function(){$("#updatePassBlock").slideDown("fast",function(){$("html, body").scrollTop($(document).height())})}):a(),"Cambiar Contrase帽a"==t.text()?(t.toggleClass("bg_blue-green bg_blue-red"),t.text("No Cambiar Contrase帽a"),e||$("#passwordSend").val(""),$("#newPass").val(""),$("#confNewPass").val("")):(t.toggleClass("bg_blue-green bg_blue-red"),t.text("Cambiar Contrase帽a"))}),$("[data-input_change]").each(function(){const t=$(this),o=t.attr("name");var n=t.val();t.on("input",function(){t.val()==n?(t.attr("name",`${o}`),a(),e=!1):(t.attr("name",`${o}Changed`),$("#profileSaved").slideDown("fast"),e=!0,""==t.val()&&t.attr("name",`${o}`))}),t.on("blur",function(){""==t.val()&&(t.attr("name",`${o}`),a(),e=!1)}),t.on("click",function(){0})}),$("input#deletePicture").change(function(){$(this).is(":checked")?($('[for="deletePicture"]').addClass("btn_press"),$("#profileSaved").slideDown("fast"),e=!0):($('[for="deletePicture"]').removeClass("btn_press"),a(),e=!1)}),$("[data-select_addClass]").change(function(){const t=$(this).val();$(this).attr("class",`form-select change_bg ${t}`)}),$("[data-blur-default]").on("blur",function(){const t=$(this).attr("data-blur-default"),e=$(this).val(),a=$(this).attr(t);""==e&&$(this).val(a),"min"==t&&e<a&&$(this).val(a)}),$('input[type="range"]').on("input",function(){const t=$(this).attr("id"),e=$(this).val();$(`[data-range-val="#${t}"]`).text(e)}),$("[data-valparams]").length&&function(){const t=function(){const t={},e=window.location.search.substring(1).split("&");for(let a=0;a<e.length;a++){const o=e[a].split("=");if(2===o.length){const e=decodeURIComponent(o[0]),a=decodeURIComponent(o[1]);t[e]=a}}return t}();if(console.log(t),t.hasOwnProperty("tab")){const e=t.tab,a=$(`#${e}`);a.length&&a.click()}}(),$("[data-blur-min]").on("blur",function(){const t=$(this).val(),e=$(this).attr("data-blur-min");$(e).attr("min",t)}),$(".tag-group").each(function(){o($(this))}),$("[data-blur-tags]").on("blur",function(){n.call(this)}),$("[data-switch]").on("click",function(){const t=$(this).data("switch"),e=$(this).prop("checked");localStorage.setItem(t,e);const a=$("#"+t+"Text"),o=$(this).data("switch-vals"),n=o?o.split(","):["No","Si"];a.text(e?n[1]:n[0])}),$("[data-switch]").each(function(){const t=$(this).data("switch"),e="true"===localStorage.getItem(t);$(this).prop("checked",e);const a=$("#"+t+"Text"),o=$(this).data("switch-vals"),n=o?o.split(","):["No","Si"];a.text(e?n[1]:n[0])})}catch(u){console.error("Error Inesperado: ",u),alertSToast("center",8e3,"error"," Ah ocurrido un error inesperado. codigo: #304")}});const inputs=document.querySelectorAll("input[data-copy]");function jsonSubmit(t){t.preventDefault=t.preventDefault||function(){},t.preventDefault();const e=t.target,a=new FormData(e);if(a.has("contenidoWord")){const t=tinymce.activeEditor.getContent();a.set("htmlTiny",t);const e=tinymce.activeEditor.getContent({format:"text"});a.set("textTiny",e)}try{formSubmitBtn=e.querySelector('button[type="submit"]'),formSubmitBtn&&formSubmitBtn.setAttribute("disabled","disabled")}catch(t){console.warn("Advertencia: Boton de envio no encontrado..."),console.warn(formSubmitBtn),console.error(t)}fetch(e.action,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":formToken}}).then(async t=>{if(!t.ok){const e=await t.json();throw console.error(e),new Error(e.error||"Error en el formato recivido")}return t.json()}).then(t=>{if(dataMessage=t.message,1==t.success){let o,n=t.icon||"success",r=t.position||"center";function a(){window.location.href=t.redirect_url}switch(t.functions){case"singin":return a();case"reload":o=()=>location.reload();break;case"redirect":o=a;break;case"reset":o=()=>e.reset()}setTimeout(()=>e.querySelector('button[type="submit"]').removeAttribute("disabled"),1e4);document.querySelectorAll('input[type="password"]').forEach(t=>t.value=""),alertSToast(r,timerOut,n,dataMessage,o)}else 0==t.success&&(t.valSelector&&(e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.add("is-invalid"),e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.remove("is-valid")),alertSToast("top",timerOut+6e3,"warning",dataMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")}));"submit"==t.functions&&e.querySelector('button[type="submit"]').removeAttribute("disabled")}).catch(t=>{console.error(" Error inesperado:",t),errorMessage=t.message||"Ocurri贸 un error. Intente nuevamente. ",alertSToast("center",timerOut+8e3,"error",errorMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")})})}function convertToDateInputFormat(t){const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}inputs.forEach(t=>{t.addEventListener("click",()=>{if(!navigator.clipboard)return void alertSToast("center",8e3,"info","Tu navegador no admite copiar al portapapeles ヰ");const e=t.value;""!=e&&navigator.clipboard.writeText(e).then(()=>{alertSToast("top",5e3,"success","Texto Copiado! コ")}).catch(t=>{const e="Error al copiar al portapapeles";console.error(e,":",t),alertSToast("top",8e3,"error",`${e} `)})})});const dropArea=document.getElementById("drop-area");if(dropArea){const t=document.getElementById("file-input"),e=document.getElementById("image-list");function formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=e<0?0:e,o=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,o)).toFixed(a))+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}function preventDefaults(t){t.preventDefault(),t.stopPropagation()}function handleDrop(t){handleFiles({target:{files:t.dataTransfer.files}})}function handleFiles(t){let e=t.target.files,a=[],o=1;[...e].forEach(t=>{validateImage(t)&&(a.push(t),previewImage(t,o),++o,console.log(++o))}),a.length>0?alertSToast("top-end",6e3,"success",`${a.length} im谩genes cargadas <br>correctamente コ`):alertSToast("center",6e3,"error","No se admite este tipo de archivo 锔")}function validateImage(t){return["image/jpeg","image/png","image/jpg"].includes(t.type)}function previewImage(t,a){const o=new FileReader;o.readAsDataURL(t),o.onloadend=function(){const n=t.name;let r=n.lastIndexOf(".");r=n.substring(r+1);const s=cadenaRandom(5,alfanumerico),i=`<div id="img_${s}" class="image-item"><img src="${o.result}" class="img-rounded unfocus-5"><div class="fs-8"><p class="name-file m-0">${n}</p><p class="size-file m-0">(${r}) ${formatBytes(t.size)}</p></div></div>`;e.insertAdjacentHTML("beforeend",i),setTimeout(()=>{document.querySelector(`#img_${s}`).classList.add("visible"),setTimeout(()=>{document.querySelector(`#img_${s} img`).classList.remove("unfocus-5")},110*a)},90*a)}}["dragenter","dragover","dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,preventDefaults,!1)}),["dragenter","dragover"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.add("hover"),!1)}),["dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.remove("hover"),!1)}),dropArea.addEventListener("drop",handleDrop,!1),dropArea.addEventListener("click",()=>t.click(),!1),t.addEventListener("change",handleFiles,!1)}function alertSToast(t,e,a,o,n){Swal.mixin({toast:!0,position:t,showConfirmButton:!1,showCloseButton:!0,timer:e,timerProgressBar:!0,customClass:{icon:"icon_alert",title:"title_alert",timerProgressBar:"progressbar_alert",closeButton:"close_button_alert"},didOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)},didDestroy:n}).fire({icon:a,title:o})}